(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{385:function(e,t,a){"use strict";a.r(t);var n=a(16),s=a(18),l=a(19),o=a(21),i=a(20),r=a(22),c=a(1),p=a.n(c),u=a(349),m=a(350),d=a(384),g=a(486),h=a(484),b=a(396),C=a(87),f=a(28),v=a(70),E=a(17),w=a(485),O=a(483),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={loading:!1},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.fileList,n=t.handleRemove,s=t.handleAdd,l=this.state.loading,o={action:"/api/aws/s3",listType:"picture",fileList:a,onSuccess:function(){s(),e.setState({loading:!1})},onRemove:function(t){n({id:t.uid}),e.setState({loading:!1})},onChange:function(t){var a=t.file;console.log(a),"uploading"===a.status&&e.setState({loading:!0})}};return p.a.createElement(b.a,{spinning:l,size:"large"},p.a.createElement(O.a,o,p.a.createElement(C.a,null,p.a.createElement(E.a,{type:"upload"})," upload")))}}]),t}(c.Component),j=a(124),x=a(108),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={visible:!1},a.showModal=function(){a.setState({visible:!0})},a.componentDidMount=function(){a.props.getS3FileList()},a.handleRemove=function(e){(0,a.props.deleteS3File)(e)},a.handleOk=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.componentWillReceiveProps=function(e){a.props.showMessage&&(g.a.success(a.props.message.toString()),a.props.hideMessage())},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getS3FileList,a=e.s3FileList.map(function(e){return{uid:e.id,name:e.name,url:e.url,thumbUrl:e.url,status:"done"}});return p.a.createElement("div",null,p.a.createElement(C.a,{onClick:this.showModal},p.a.createElement(E.a,{type:"upload"})," Click to upload"),p.a.createElement(w.a,{title:"My uploaded files",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},p.a.createElement(y,{handleAdd:t,handleRemove:this.handleRemove,fileList:a})))}}]),t}(p.a.Component),P=Object(f.b)(function(e){var t=e.aws,a=e.common;return{s3FileList:t.s3FileList,loading:t.loading,showMessage:a.showMessage,message:a.message}},{getS3FileList:j.c,deleteS3File:j.a,hideMessage:x.a})(S),M=a(477),L=a.n(M),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={content:""},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.content;return p.a.createElement(L.a,{activeClass:"p10",content:a,events:{change:t}})}}]),t}(p.a.Component),F=u.a.Item,D=m.a.TextArea,R=d.a.Option,V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).componentDidMount=function(){var e=a.props,t=e.getPost,n=e.getPostCategoryList,s=a.props.match.params;s.id&&t(s.id),n()},a.componentWillReceiveProps=function(e){var t=e.selectedPost;t&&a.setState({content:t.content}),a.props.showMessage&&(g.a.success(a.props.message.toString()),a.props.hideMessage(),a.props.history.push("/blog/post-table"))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.props.saveOrUpdatePost(Object(n.a)({},t,{postCategory:{id:t.postCategory},content:a.state.content}))})},a.handleContentChange=function(e){var t=e.editor.getData();a.setState({content:t})},a.state={content:""},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.selectedPost,s=a.postCategoryList,l=a.loading;return p.a.createElement(h.a,{className:"gx-card",title:"Post Form"},p.a.createElement(b.a,{spinning:l,size:"large"},p.a.createElement(u.a,{onSubmit:this.handleSubmit},n.id?p.a.createElement(F,{label:"ID",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:12}},t("id",{initialValue:n.id})(p.a.createElement(m.a,{disabled:!0}))):"",p.a.createElement(F,{label:"Title",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},t("title",{initialValue:n.title,rules:[{required:!0,message:"Please input post title!"}]})(p.a.createElement(m.a,null))),p.a.createElement(F,{label:"Author",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},t("author",{initialValue:n.author,rules:[{required:!0,message:"Please input post author!"}]})(p.a.createElement(m.a,null))),p.a.createElement(F,{label:"Image",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},t("image",{initialValue:n.image,rules:[{required:!0,message:"Please input post image!"}]})(p.a.createElement(m.a,null))),p.a.createElement(F,{label:"Category",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},t("postCategory",{initialValue:n.postCategory?n.postCategory.id:1})(p.a.createElement(d.a,{className:"gx-mr-3 gx-mb-3"},s.map(function(e){return p.a.createElement(R,{key:e.id,value:e.id},e.name)})))),p.a.createElement(F,{label:"Description",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},t("description",{initialValue:n.description,rules:[{required:!0,message:"Please input post description!"}]})(p.a.createElement(D,{autosize:{minRows:4,maxRows:8}}))),p.a.createElement(F,{label:"Upload",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},p.a.createElement(P,null)),p.a.createElement(F,{label:"Description",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:16}},p.a.createElement(k,{content:this.state.content,onChange:this.handleContentChange})),p.a.createElement(F,{wrapperCol:{xs:24,sm:{span:12,offset:5}}},p.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Save"),n.id?p.a.createElement(C.a,{type:"danger",onClick:function(){e.setState({warning:!0})}},"Delete"):""))))}}]),t}(c.Component),A=u.a.create()(V);t.default=Object(f.b)(function(e){var t=e.blog,a=e.common;return{loading:t.loading,selectedPost:t.selectedPost,postCategoryList:t.postCategoryList,showMessage:a.showMessage,message:a.message}},{getPost:v.a,getPostCategoryList:v.b,saveOrUpdatePost:v.g,hideMessage:x.a})(A)}}]);
//# sourceMappingURL=3.dfee45d5.chunk.js.map